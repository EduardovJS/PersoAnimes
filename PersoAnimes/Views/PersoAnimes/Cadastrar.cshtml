@using PersoAnimes.Dto
@model PersoAnimesCriacaoDto


<div class="container mt-5">
    <form method="post" asp-action="Cadastrar" asp-controller="PersoAnimes" enctype="multipart/form-data">
        <!--Para enviar  arquivos de img, se usa o multipart/form-data -->
        <h2>Cadastro de Personagens</h2>
        <div class="text-center">
            <label for="ImageFile">
                <img id="img" style="width:150px; height:200px" />
            </label>
        </div>

        <div class="mb-1">

            <label class="form-label mt-3">Capa:</label>
            <input type="file" id="ImageFile" name="foto" class="form-control shadow-none" />
        </div>

        <div class="mb-1">
            <label class="form-label">Nome do Personagem:</label>
            <input type="text" asp-for="NomeAnime" class="form-control shadow-none">
            <span class="text-danger" asp-validation-for="NomeAnime"></span>
        </div>

        <div class="mb-1">
            <label class="form-label">Descrição:</label>
            <input type="text" asp-for="Descricao" class="form-control shadow-none">
            <span class="text-danger" asp-validation-for="Descricao"></span>
        </div>

        <div class="mb-1">
            <label class="form-label">Nome do Anime:</label>
            <input type="text" asp-for="Anime" class="form-control shadow-none">
            <span class="text-danger" asp-validation-for="Anime"></span>
        </div>

        <div class="btn-box d-flex mt-3">
            <button type="submit" class="btn btn-success w-50 mx-1">
                <i class="bi bi-plus-circle"></i> Cadastrar!
            </button>

            <a type="submit" class="btn btn-info w-50" asp-controller="PersoAnimes" asp-action="Index"><i class="bi bi-arrow-left-circle"></i> Voltar</a>

        </div>
    </form>


    <script>


        const inputFile = document.querySelector("#ImageFile");

        inputFile.addEventListener("change", function (e) {
            const inputTarget = e.target;
            const file = inputTarget.files[0];

            if (file) {
                const reader = new FileReader();

                reader.addEventListener("load", function (e) {
                    const readerTarget = e.target;
                    const img = document.querySelector("#img");
                    img.src = readerTarget.result;

                    const figcaption = document.querySelector("#figcaption");
                    figcaption.innerHTML = file.name;
                });

                reader.readAsDataURL(file);
            }
        }


        )
    </script>
</div>